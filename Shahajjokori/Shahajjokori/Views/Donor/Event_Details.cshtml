@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{ }

@model Shahajjokori.Models.Event
<!--<h1>@ViewBag.event_id</h1>-->
<div style="background-color: #FDF5E6;">
    <div class="container" style="padding-top: 5%;">
        <div class="row">
            <div class="col-md-12">
                <h3 style="text-decoration: underline;text-decoration-color: cadetblue">@Html.DisplayFor(model => model.e_title)</h3>
            </div>
        </div>
        <div class="row" style="margin-top: 3%;">
            <div class="col-md-6">
                <p style="font-size:larger">Created by: <button class="btn btn-link" data-toggle="modal" data-target="#exampleModal1" style="font-size:19px; text-decoration: none; margin-bottom:0.5%; color:black;">@ViewBag.org</button></p>
                <p style="font-size:larger; margin-top:-1%">Location: @Html.DisplayFor(model => model.e_location)</p>
                
                @if (ViewBag.event_cat == 0)
                {
    <p style="font-size:larger">Category: Education</p>}
                @if (ViewBag.event_cat == 1)
                {
    <p style="font-size:larger">Category: Education</p>}
                @if (ViewBag.event_cat == 2)
                {
    <p style="font-size:larger">Category: Emergency Aid</p>}
                @if (ViewBag.event_cat == 3)
                {
    <p style="font-size:larger">Category: Education</p>}
                @if (ViewBag.event_cat == 4)
                {
    <p style="font-size:larger">Category: Education</p>}
                @if (ViewBag.event_cat == 5)
                {
    <p style="font-size:larger">Category: Education</p>}
                
                <p style="font-size:larger">Opening: @Html.DisplayFor(model => model.e_opening_date)</p>
                
                <p style="font-size:larger">Closing: @Html.DisplayFor(model => model.e_closing_date)</p>
                
                <p style="font-size:larger">Expected: @ViewBag.exp_amount Tk.</p>
                
                <p style="font-size:larger">Raised: @ViewBag.raised_amount Tk.</p>
                <div class="progress" style="margin-top: 5%">
                    @{ float raised = (float)ViewBag.raised_amount;
                                    float exp = (float)ViewBag.exp_amount;
                                    float percentage = (raised / exp) * 100;
                                    string perc = percentage + "%"; }
                    <div class="progress-bar bg-info" role="progressbar" aria-valuenow="@ViewBag.raised_amount" aria-valuemin="0" aria-valuemax="@ViewBag.exp_amount" style="width:@perc">
                        @ViewBag.raised_amount
                    </div>
                </div>
                <br>

            </div>
            <div class="col-md-6">
                @{ string pic_name = ViewBag.event_pic;
                                string path = $"~/images/{pic_name}"; }

                <img src="@path" alt="" style="height: 20vw; max-width: 100%;" asp-append-version="true">
                
                <p style="font-size:larger; margin-top: 3%;">This event has received @Html.DisplayFor(model => model.e_donor_count) donations.</p>
                <br />
                <button type="button" class="btn btn-outline-info" data-toggle="modal" data-target="#exampleModal2">I want to Donate</button>
            </div>
        </div>
        <div class="row" style="margin-top: 5%;">
            <div class="col-md-12">
                <h4>About the Event: </h4>
                <p style="font-size:larger">@Html.DisplayFor(model => model.e_details)</p>
            </div>
        </div>

    </div>
</div>



<!-- Modal -->
<div class="modal fade" id="exampleModal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">@ViewBag.org</h5>

            </div>
            <div class="modal-body">
                <div>
                    @ViewBag.org_about
                    <input type="text" value="@ViewBag.org_phone" id="number" hidden>
                </div>
                <br />
                <div>
                    <p>Contact Number: @ViewBag.org_phone</p>
                </div>
            </div>

            <div class="modal-footer">
                <button onclick="myFunction()" style="border: none; background-color: transparent;">Copy Number</button>
                <script>
                    function myFunction() {
                        var copyText = document.getElementById("number");
                        copyText.select();
                        copyText.setSelectionRange(0, 99999)
                        document.execCommand("copy");
                        alert("Copied the text: " + copyText.value);
                    }
                </script>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="exampleModal2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">@ViewBag.event_title</h5>

            </div>
            <div class="modal-body" style="white-space:pre-line;">
                <p>Available accounts for transaction:</p>
                <p>@ViewBag.event_trans</p>
            </div>

            <div class="modal-footer" style="text-align:center;">

                <a class="btn btn-primary" asp-controller="Donor" asp-action="Donated" asp-route-id="@ViewBag.event_id" style="margin-top:5%">I have donated</a>

                <!--<input class="modal-footer" id="myInput" value="@ViewBag.org_phone" style="border: none; background-color: transparent;" readonly>-->
                <!--<button onclick="myFunction()" style="border: none; background-color: transparent;">Copy Number</button>-->
            </div>
        </div>
    </div>
</div>
<footer style=" bottom: 0; width: 100%; white-space: nowrap; line-height:100px;">
    <div class="container">
        &copy; 2021 - Shahajjokori - <a style="color:black" asp-controller="Donor" asp-action="donor_index" asp-route-id="@ViewBag.d_id">@ViewBag.d_name</a> - <a style="color:black" asp-controller="Donor" asp-action="DonationHistory" asp-route-id="@ViewBag.d_id">Donation History</a> - <a style="color:black" asp-controller="Donor" asp-action="Donor_Notification" asp-route-id="@ViewBag.d_id">Notification</a>
    </div>
</footer>



